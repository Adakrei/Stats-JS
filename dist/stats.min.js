!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).statsjs={})}(this,(function(t){"use strict";class i{name;fg;bg;min=1/0;max=0;round=Math.round;sizeOptions;dom;constructor(t,i,e){this.name=t,this.fg=i,this.bg=e;const s=this.round(window.devicePixelRatio||1);this.sizeOptions={pr:s,width:80*s,height:48*s,textX:3*s,textY:2*s,graphX:3*s,graphY:15*s,graphWidth:74*s,graphHeight:30*s},this.dom=document.createElement("canvas"),this.dom.width=this.sizeOptions.width,this.dom.height=this.sizeOptions.height,this.dom.style.cssText="width:80px;height:48px";const h=this.dom.getContext("2d");if(!h)throw new Error("Unable to get 2d context");h.font=`bold ${9*s}px Helvetica,Arial,sans-serif`,h.textBaseline="top",h.fillStyle=this.bg,h.fillRect(0,0,this.sizeOptions.width,this.sizeOptions.height),h.fillStyle=this.fg,h.fillText(this.name,this.sizeOptions.textX,this.sizeOptions.textY),h.fillRect(this.sizeOptions.graphX,this.sizeOptions.graphY,this.sizeOptions.graphWidth,this.sizeOptions.graphHeight),h.fillStyle=this.bg,h.globalAlpha=.9,h.fillRect(this.sizeOptions.graphX,this.sizeOptions.graphY,this.sizeOptions.graphWidth,this.sizeOptions.graphHeight)}update(t,i){this.min=Math.min(this.min,t),this.max=Math.max(this.max,t);const e=this.sizeOptions.pr,s=this.dom.getContext("2d");if(!s)throw new Error("Unable to get 2d context");s.fillStyle=this.bg,s.globalAlpha=1,s.fillRect(0,0,this.sizeOptions.width,this.sizeOptions.graphY),s.fillStyle=this.fg,s.fillText(`${this.round(t)} ${this.name} (${this.round(this.min)}-${this.round(this.max)})`,this.sizeOptions.textX,this.sizeOptions.textY),s.drawImage(this.dom,this.sizeOptions.graphX+e,this.sizeOptions.graphY,this.sizeOptions.graphWidth-e,this.sizeOptions.graphHeight,this.sizeOptions.graphX,this.sizeOptions.graphY,this.sizeOptions.graphWidth-e,this.sizeOptions.graphHeight),s.fillRect(this.sizeOptions.graphX+this.sizeOptions.graphWidth-e,this.sizeOptions.graphY,e,this.sizeOptions.graphHeight),s.fillStyle=this.bg,s.globalAlpha=.9,s.fillRect(this.sizeOptions.graphX+this.sizeOptions.graphWidth-e,this.sizeOptions.graphY,e,this.round((1-t/i)*this.sizeOptions.graphHeight))}}class e{static version="1.0.1";performanceInfo=self.performance;mode=0;container;beginTime=(this.performanceInfo||Date).now();prevTime=this.beginTime;frames=0;fpsPanel;msPanel;memPanel;constructor(){this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:90000",this.container.addEventListener("click",(t=>{t.preventDefault(),this.showPanel(++this.mode%this.container.children.length)}),!1),this.fpsPanel=this.addPanel(new i("FPS","#0ff","#002")),this.msPanel=this.addPanel(new i("MS","#0f0","#020")),"memory"in this.performanceInfo&&(this.memPanel=this.addPanel(new i("MB","#f08","#201"))),this.showPanel(0)}begin(){this.beginTime=(this.performanceInfo||Date).now()}end(){this.frames++;const t=(this.performanceInfo||Date).now();if(this.msPanel.update(t-this.beginTime,200),t>=this.prevTime+1e3&&(this.fpsPanel.update(1e3*this.frames/(t-this.prevTime),100),this.prevTime=t,this.frames=0,this.memPanel)){const t=this.performanceInfo.memory;this.memPanel.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return t}update(){this.beginTime=this.end()}get version(){return e.version}get dom(){return this.container}setMode(t){this.showPanel(t)}addPanel(t){return this.container.appendChild(t.dom),t}showPanel(t){for(let i=0;i<this.container.children.length;i++)this.container.children[i].style.display=i===t?"block":"none";this.mode=t}}t.Panel=i,t.Stats=e}));
